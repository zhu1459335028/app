/*!
 AutoFill 1.2.1
 Â©2008-2014 SpryMedia Ltd - datatables.net/license
*/
(function(d,c,a){var b=function(g,e){var f=function(i,h){if(!(this instanceof f)){throw"Warning: AutoFill must be initialised with the keyword 'new'"}if(!g.fn.dataTableExt.fnVersionCheck("1.7.0")){throw"Warning: AutoFill requires DataTables 1.7 or greater"}this.c={};this.s={filler:{height:0,width:0},border:{width:2},drag:{startX:-1,startY:-1,startTd:null,endTd:null,dragging:!1},screen:{interval:null,y:0,height:0,scrollTop:0},scroller:{top:0,bottom:0},columns:[]};this.dom={table:null,filler:null,borderTop:null,borderRight:null,borderBottom:null,borderLeft:null,currentTarget:null};this.fnSettings=function(){return this.s};this._fnInit(i,h);return this};f.prototype={_fnInit:function(m,h){var i=this;this.s.dt=e.Api?(new e.Api(m)).settings()[0]:m.fnSettings();this.s.init=h||{};this.dom.table=this.s.dt.nTable;g.extend(!0,this.c,f.defaults,h);this._initColumns();var l=g("<div/>",{"class":"AutoFill_filler"}).appendTo("body");this.dom.filler=l[0];this.s.filler.height=l.height();this.s.filler.width=l.width();l[0].style.display="none";var j,k=c.body;""!==i.s.dt.oScroll.sY&&(i.s.dt.nTable.parentNode.style.position="relative",k=i.s.dt.nTable.parentNode);j=g("<div/>",{"class":"AutoFill_border"});this.dom.borderTop=j.clone().appendTo(k)[0];this.dom.borderRight=j.clone().appendTo(k)[0];this.dom.borderBottom=j.clone().appendTo(k)[0];this.dom.borderLeft=j.clone().appendTo(k)[0];l.on("mousedown.DTAF",function(n){this.onselectstart=function(){return false};i._fnFillerDragStart.call(i,n);return false});g("tbody",this.dom.table).on("mouseover.DTAF mouseout.DTAF",">tr>td, >tr>th",function(n){i._fnFillerDisplay.call(i,n)});g(this.dom.table).on("destroy.dt.DTAF",function(){l.off("mousedown.DTAF").remove();g("tbody",this.dom.table).off("mouseover.DTAF mouseout.DTAF")})},_initColumns:function(){var l=this,h,i,k=this.s.dt,j=this.s.init;h=0;for(i=k.aoColumns.length;h<i;h++){this.s.columns[h]=g.extend(!0,{},f.defaults.column)}k.oApi._fnApplyColumnDefs(k,j.aoColumnDefs||j.columnDefs,j.aoColumns||j.columns,function(n,m){l._fnColumnOptions(n,m)});h=0;for(i=k.aoColumns.length;h<i;h++){if(k=this.s.columns[h],k.read||(k.read=this._fnReadCell),k.write||(k.read=this._fnWriteCell),!k.step){k.read=this._fnStep}}},_fnColumnOptions:function(j,h){var i=this.s.columns[j],k=function(m,l){h[l[0]]!==a&&(i[m]=h[l[0]]);h[l[1]]!==a&&(i[m]=h[l[1]])};k("enable",["bEnable","enable"]);k("read",["fnRead","read"]);k("write",["fnWrite","write"]);k("step",["fnStep","step"]);k("increment",["bIncrement","increment"])},_fnTargetCoords:function(j){var h=g(j).parents("tr")[0],i=this.s.dt.oInstance.fnGetPosition(j);return{x:g("td",h).index(j),y:g("tr",h.parentNode).index(h),row:i[0],column:i[2]}},_fnUpdateBorder:function(u,v){var w=this.s.border.width,t=g(u).offset(),r=g(v).offset(),s=t.left-w,p=r.left+g(v).outerWidth(),l=t.top-w,q=r.top+g(v).outerHeight(),o=r.left+g(v).outerWidth()-t.left+2*w,m=r.top+g(v).outerHeight()-t.top+2*w;t.left>r.left&&(s=r.left-w,p=t.left+g(u).outerWidth(),o=t.left+g(u).outerWidth()-r.left+2*w);""!==this.s.dt.oScroll.sY&&(w=g(this.s.dt.nTable.parentNode).offset(),t=g(this.s.dt.nTable.parentNode).scrollTop(),r=g(this.s.dt.nTable.parentNode).scrollLeft(),s-=w.left-r,p-=w.left-r,l-=w.top-t,q-=w.top-t);w=this.dom.borderTop.style;w.top=l+"px";w.left=s+"px";w.height=this.s.border.width+"px";w.width=o+"px";w=this.dom.borderBottom.style;w.top=q+"px";w.left=s+"px";w.height=this.s.border.width+"px";w.width=o+"px";w=this.dom.borderLeft.style;w.top=l+"px";w.left=s+"px";w.height=m+"px";w.width=this.s.border.width+"px";w=this.dom.borderRight.style;w.top=l+"px";w.left=p+"px";w.height=m+"px";w.width=this.s.border.width+"px"},_fnFillerDragStart:function(k){var h=this,i=this.dom.currentTarget;this.s.drag.dragging=!0;h.dom.borderTop.style.display="block";h.dom.borderRight.style.display="block";h.dom.borderBottom.style.display="block";h.dom.borderLeft.style.display="block";var j=this._fnTargetCoords(i);this.s.drag.startX=j.x;this.s.drag.startY=j.y;this.s.drag.startTd=i;this.s.drag.endTd=i;this._fnUpdateBorder(i,i);g(c).bind("mousemove.AutoFill",function(l){h._fnFillerDragMove.call(h,l)});g(c).bind("mouseup.AutoFill",function(l){h._fnFillerFinish.call(h,l)});this.s.screen.y=k.pageY;this.s.screen.height=g(d).height();this.s.screen.scrollTop=g(c).scrollTop();""!==this.s.dt.oScroll.sY&&(this.s.scroller.top=g(this.s.dt.nTable.parentNode).offset().top,this.s.scroller.bottom=this.s.scroller.top+g(this.s.dt.nTable.parentNode).height());this.s.screen.interval=setInterval(function(){var l=g(c).scrollTop();h.s.screen.y=h.s.screen.y+(l-h.s.screen.scrollTop);h.s.screen.height-h.s.screen.y+l<50?g("html, body").animate({scrollTop:l+50},240,"linear"):h.s.screen.y-l<50&&g("html, body").animate({scrollTop:l-50},240,"linear");h.s.dt.oScroll.sY!==""&&(h.s.screen.y>h.s.scroller.bottom-50?g(h.s.dt.nTable.parentNode).animate({scrollTop:g(h.s.dt.nTable.parentNode).scrollTop()+50},240,"linear"):h.s.screen.y<h.s.scroller.top+50&&g(h.s.dt.nTable.parentNode).animate({scrollTop:g(h.s.dt.nTable.parentNode).scrollTop()-50},240,"linear"))},250)},_fnFillerDragMove:function(j){if(j.target&&"TD"==j.target.nodeName.toUpperCase()&&j.target!=this.s.drag.endTd){var h=this._fnTargetCoords(j.target);"y"==this.c.mode&&h.x!=this.s.drag.startX&&(j.target=g("tbody>tr:eq("+h.y+")>td:eq("+this.s.drag.startX+")",this.dom.table)[0]);"x"==this.c.mode&&h.y!=this.s.drag.startY&&(j.target=g("tbody>tr:eq("+this.s.drag.startY+")>td:eq("+h.x+")",this.dom.table)[0]);"either"==this.c.mode&&(h.x!=this.s.drag.startX?j.target=g("tbody>tr:eq("+this.s.drag.startY+")>td:eq("+h.x+")",this.dom.table)[0]:h.y!=this.s.drag.startY&&(j.target=g("tbody>tr:eq("+h.y+")>td:eq("+this.s.drag.startX+")",this.dom.table)[0]));"both"!==this.c.mode&&(h=this._fnTargetCoords(j.target));var i=this.s.drag;i.endTd=j.target;h.y>=this.s.drag.startY?this._fnUpdateBorder(i.startTd,i.endTd):this._fnUpdateBorder(i.endTd,i.startTd);this._fnFillerPosition(j.target)}this.s.screen.y=j.pageY;this.s.screen.scrollTop=g(c).scrollTop();""!==this.s.dt.oScroll.sY&&(this.s.scroller.scrollTop=g(this.s.dt.nTable.parentNode).scrollTop(),this.s.scroller.top=g(this.s.dt.nTable.parentNode).offset().top,this.s.scroller.bottom=this.s.scroller.top+g(this.s.dt.nTable.parentNode).height())},_fnFillerFinish:function(){var s=this,t,u;g(c).unbind("mousemove.AutoFill mouseup.AutoFill");this.dom.borderTop.style.display="none";this.dom.borderRight.style.display="none";this.dom.borderBottom.style.display="none";this.dom.borderLeft.style.display="none";this.s.drag.dragging=!1;clearInterval(this.s.screen.interval);var r=[],p=this.dom.table,q=this._fnTargetCoords(this.s.drag.startTd),n=this._fnTargetCoords(this.s.drag.endTd),o=function(h){return s.s.dt.oApi._fnVisibleToColumnIndex(s.s.dt,h)};if(q.y<=n.y){for(t=q.y;t<=n.y;t++){if(q.x<=n.x){for(u=q.x;u<=n.x;u++){r.push({node:g("tbody>tr:eq("+t+")>td:eq("+u+")",p)[0],x:u-q.x,y:t-q.y,colIdx:o(u)})}}else{for(u=q.x;u>=n.x;u--){r.push({node:g("tbody>tr:eq("+t+")>td:eq("+u+")",p)[0],x:u-q.x,y:t-q.y,colIdx:o(u)})}}}}else{for(t=q.y;t>=n.y;t--){if(q.x<=n.x){for(u=q.x;u<=n.x;u++){r.push({node:g("tbody>tr:eq("+t+")>td:eq("+u+")",p)[0],x:u-q.x,y:t-q.y,colIdx:o(u)})}}else{for(u=q.x;u>=n.x;u--){r.push({node:g("tbody>tr:eq("+t+")>td:eq("+u+")",p)[0],x:q.x-u,y:q.y-t,colIdx:o(u)})}}}}if(!(1>=r.length)){var p=[],j;t=0;for(u=r.length;t<u;t++){var q=r[t],n=this.s.columns[q.colIdx],o=n.read.call(n,q.node),k=n.step.call(n,q.node,o,j,t,q.x,q.y);n.write.call(n,q.node,k);j=k;p.push({cell:q,colIdx:q.colIdx,newValue:k,oldValue:o})}null!==this.c.complete&&this.c.complete.call(this,p);e.Api?(new e.Api(this.s.dt)).draw(!1):this.s.dt.oInstance.fnDraw()}},_fnFillerDisplay:function(k){var h=this.dom.filler;if(!this.s.drag.dragging){var i="td"==k.target.nodeName.toLowerCase()?k.target:g(k.target).parents("td")[0],j=this._fnTargetCoords(i).column;if(this.s.columns[j].enable){if("mouseover"==k.type){this.dom.currentTarget=i,this._fnFillerPosition(i),h.style.display="block"}else{if(!k.relatedTarget||!k.relatedTarget.className.match(/AutoFill/)){h.style.display="none"}}}else{h.style.display="none"}}},_fnFillerPosition:function(j){var h=g(j).offset(),i=this.dom.filler;i.style.top=h.top-this.s.filler.height/2-1+g(j).outerHeight()+"px";i.style.left=h.left-this.s.filler.width/2-1+g(j).outerWidth()+"px"}};e.AutoFill=f;e.AutoFill=f;f.version="1.2.1";f.defaults={mode:"y",complete:null,column:{enable:!0,increment:!0,read:function(h){return g(h).html()},write:function(k,h){var i=g(k).parents("table");if(e.Api){i.DataTable().cell(k).data(h)}else{var i=i.dataTable(),j=i.fnGetPosition(k);i.fnUpdate(h,j[0],j[2],!1)}},step:function(m,h,i,l,j,k){m=/(\-?\d+)/;return(l=this.increment&&i?i.match(m):null)?i.replace(m,parseInt(l[1],10)+(0>j||0>k?-1:1)):i===a?h:i}}};return f};"function"===typeof define&&define.amd?define(["jquery","datatables"],b):"object"===typeof exports?b(require("jquery"),require("datatables")):jQuery&&!jQuery.fn.dataTable.AutoFill&&b(jQuery,jQuery.fn.dataTable)})(window,document);